<div class="map_container">
<div style='width: 800px;'>
  <div id="geolocation" style='width: 800px; height: 400px;'></div>
</div>

<script>

var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'geolocation'} }, function(){
if(navigator.geolocation)
  navigator.geolocation.getCurrentPosition(displayOnMap);
});

function displayOnMap(position){
var marker = handler.addMarker({
  lat: position.coords.latitude,
  lng: position.coords.longitude
});

markers = handler.addMarkers(<%=raw @hash.to_json %>);
handler.map.centerOn(marker);
handler.getMap().setZoom(15);
};

      //project geocoding api key= AIzaSyBtM5dq-gJcORAiWB4LXob7rYXL1B06yrk
      //project api key= AIzaSyDjoC5B_BeZt3Vr_FE-lomEzZKtU7AQ0Ic
</script>
</div>
